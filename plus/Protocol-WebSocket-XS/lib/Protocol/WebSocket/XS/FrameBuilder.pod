=head1 NAME

Protocol::WebSocket::XS::FrameBuilder - low-level frame generator helper

=cut

=head1 DESCRIPTION

The class helps in creation of low-level frames of a single message. It
might be useful if message data is partly available and should be
delivered to peer.

The output frames are serialized as binary string, it is useless to access
to them via L<Protocol::WebSocket::XS::Frame> interface.

You cannot instantiate an object of the class direcly, it can be accessed
only via L<Protocol::WebSocket::XS::Parser>.

=head1 METHODS

=head2 opcode()

See L<Protocol::WebSocket::XS>.

=head2 deflate()

Returns flag, wheather C<deflate> option is set for the current I<message>.

=head2 final()

=head2 final(bool value)

Gets and sets the C<final> flag on the I<next> frame serialization (i.e.
C<send> or C<send_av> methods).

=head2 send(string)

=head2 send_av(array of strings)

Returns serialized frame with the supplied payload (in form of string or
array of string).

Beware, if the C<deflate> is enabled and C<final> is not set, the compressed
payload might be availale with I<output latency> (i.e. some input provided
no output). C<final> frame flushes all accumulated compressed payload.


=head1 SEE ALSO

L<rfc6455|https://tools.ietf.org/html/rfc6455>

L<Protocol::WebSocket::XS>

L<Protocol::WebSocket::XS::FrameIterator>

L<Protocol::WebSocket::XS::Message>

L<Protocol::WebSocket::XS::Parser>

=head1 AUTHOR

Pronin Oleg <syber@cpan.org>, Crazy Panda LTD

Ivan Baidakou <i.baydakov@dev.crazypanda.ru>, Crazy Panda LTD

=head1 LICENSE

You may distribute this code under the same terms as Perl itself.

=cut
